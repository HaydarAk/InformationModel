// _:TEMPORAL_CONSTRAINT_TEMPLATE
// ------------------

// The TemporalConstraintTemplate is a RegEx-like representation of the possible forms, which can be inserted at the Constraint position in an IDS Usage Control Template.

(
  {
    "@type": "ids:TemporalConstraint",                                          // A TemporalConstraint, for instance current time > January 1st 2020
    "ids:leftOperand": { "@id": "POLICY_EVALUATION_TIME" },                     // The current time, usually the system time.
    "ids:operator": { "@id":
      ("AFTER" | "BEFORE" | "CONTAINS" | "TEMPORAL_DISJOINT" | "DURING"
      | "TEMPORAL_EQUALS" | "FINISHED_BY" | "FINISHES" | "MEETS" |
      "MET_BY" | "OVERLAPS" | "OVERLAPPED_BY" | "STARTS" | "STARTED_BY")        // The comaprison operator, for instance AFTER
    },
    "ids:rightOperand": {
      "@id": "?Value",                                                          // The value expression, for instance ?Value := "2020-01-01T00:00:00.000+02:00"
      "@type": "http://www.w3.org/2001/XMLSchema#dateTimeStamp"
    }
    (, "ids:pipEndpoint": { "@id": "?ClockEndpoint"} )?                         // A URI or path expression to a shared time provider, if necessary.
  }
| // or
  {
    "@type": "ids:TemporalConstraint",                                          // A TemporalConstraint, for instance usage time < 10 minutes
    "ids:leftOperand": { "@id": "ELAPSED_TIME" },                               // The overall usage time of the asset, must be provided by the usage enforcement engine or the IDS Connector.
    "ids:operator": { "@id":
      ("SHORTER" | "SHORTER_EQ" | "LONGER" | "LONGER_EQ" | "DURATION_EQ")       // The comaprison operator, for instance SHORTER
    },
    "ids:rightOperand": {
      "@id": "?Value",                                                          // The value expression, for instance ?Value := "P0Y0M0DT0H10M0S"
      "@type": "http://www.w3.org/2001/XMLSchema#duration"
    }
    (, "ids:pipEndpoint": { "@id": "?PipEndpoint"} )?                           // A URI or path expression to a provider of the usage duration.
  }
| // or
  {
    "@type": "ids:LogicalConstraint",                                           // A Collection with more than one condition to describe its members.
    "and": {                                                                    // Both Constraints have to be satisfied.
      "@list": [                                                                // LogicalConstraints allow the expression of complex constraints. For instance, we can restrict the policy to be only valid in 2020.
        {
          "@type": "ids:TemporalConstraint",                                    // A TemporalConstraint, for instance current time > January 1st 2020
          "ids:leftOperand": { "@id": "POLICY_EVALUATION_TIME" },               // The current time, usually the system time.
          "ids:operator": { "@id": "AFTER" },
          "ids:rightOperand": {
            "@id": "?Value",                                                    // The value expression, for instance ?Value := "2020-01-01T00:00:00.000+02:00"
            "@type": "http://www.w3.org/2001/XMLSchema#dateTimeStamp"
          }
          (, "ids:pipEndpoint": { "@id": "?ClockEndpoint"} )?                   // A URI or path expression to a shared time provider, if necessary.
        },
        {
          "@type": "ids:TemporalConstraint",                                    // A TemporalConstraint, for instance current time < January 1st 2021
          "ids:leftOperand": { "@id": "POLICY_EVALUATION_TIME" },               // The current time, usually the system time.
          "ids:operator": { "@id": "BEFORE" },
          "ids:rightOperand": {
            "@id": "?Value",                                                    // The value expression, for instance ?Value := "2020-12-12T23:59:59.999+02:00"
            "@type": "http://www.w3.org/2001/XMLSchema#dateTimeStamp"
          }
          (, "ids:pipEndpoint": { "@id": "?ClockEndpoint"} )?                   // A URI or path expression to a shared time provider, if necessary.
        }
      ]
    }
  }
)
