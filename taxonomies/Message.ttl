@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix ids: <https://w3id.org/ids/core/> .
@prefix idsm: <https://w3id.org/ids/metamodel/> .

# Classes
# -------

# Basic Message Types
# -------------------

ids:Request a owl:Class;
    rdfs:subClassOf ids:Message ;
    idsm:abstract true;
    rdfs:label "Request Message"@en ;
    rdfs:comment "Client-generated message initiating a communication, motivated by a certain reason and with an answer expected."@en.

ids:Response a owl:Class;
    rdfs:subClassOf ids:Message ;
    idsm:abstract true;
    rdfs:label "Response Message"@en ;
    rdfs:comment "Response messages hold information about the reaction of a recipient to a formerly sent command or event. They must be correlated to this message."@en;
    idsm:validation [
        idsm:forProperty ids:correlationMessage;
        idsm:constraint idsm:NotNull;
    ].

ids:Event a owl:Class ;
    rdfs:subClassOf ids:Message ;
    idsm:abstract true;
    rdfs:label "Event Message"@en ;
    rdfs:comment "Event messages are informative and no response is expected by the sender."@en.

ids:Command a owl:Class;
    rdfs:subClassOf ids:Request ;
    idsm:abstract true;
    rdfs:label "Command Message"@en ;
    rdfs:comment "Command messages are usually sent when a response is expected by the sender. Changes state on the recipient side. Therefore, commands are not 'safe' in the sense of REST."@en.

ids:Query a owl:Class ;
    rdfs:subClassOf ids:Request ;
    idsm:abstract true;
    rdfs:label "Query Command"@en ;
    rdfs:comment "Query commands are intended to annotate query strings in a specified query language or address a specific resource."@en.

ids:Result a owl:Class;
    rdfs:subClassOf ids:Response ;
    rdfs:label "Result Message"@en ;
    rdfs:comment "Result messages are intended to annotate the results of a query command. "@en.

ids:Rejection a owl:Class;
    rdfs:subClassOf ids:Response ;
    rdfs:label "Rejection Message"@en ;
    rdfs:comment "Rejection messages are specialized response messages that notify the sender of a message that processing of this message has failed."@en.

ids:RejectionReason a owl:Class;
    rdfs:label "RejectionReason"@en ;
    rdfs:comment "Class of reasons that might lead to issuing a Rejection message."@en.

ids:rejectionReason a owl:ObjectProperty;
    rdfs:domain ids:Rejection;
    rdfs:range ids:RejectionReason;
    rdfs:label "rejectionReason"@en;
    rdfs:comment "Specifies the reason of the rejection."@en.

# Self-description Access
# -----------------------

ids:RequestSelfDescription a owl:Class;
    rdfs:subClassOf ids:Request ;
    rdfs:label "Request Self Description"@en ;
    rdfs:comment "Message requesting the self-description of an Infrastructure Component."@en.

ids:SelfDescriptionResponse a owl:Class ;
    rdfs:subClassOf ids:Response ;
    rdfs:label "Self Description Response"@en ;
    rdfs:comment "Message containing the self-description of an Infrastructure Component."@en.

# Broker Messages
# ---------------

ids:ConnectorAvailable a owl:Class;
    rdfs:subClassOf ids:Event ;
    rdfs:label "Connector Available"@en ;
    rdfs:comment "Event notifying the recipient(s) about the availability of a new connector. The payload of the message must contain the new connector's self-description."@en.

ids:ConnectorUnavailable a owl:Class;
    rdfs:subClassOf ids:Event ;
    rdfs:label "Connector Unavailable"@en ;
    rdfs:comment "Event notifying the recipient(s) that a connector will be unavailable and never be available again."@en.

ids:ConnectorTemporarilyUnavailable a owl:Class;
    rdfs:subClassOf ids:Event ;
    rdfs:label "Connector Temporarlily Unavailable"@en ;
    rdfs:comment "Event notifying the recipient(s) that a connector will be temporarily unavailable and most likely be available again in the future."@en.

ids:ConnectorConfigurationChange a owl:Class;
    rdfs:subClassOf ids:Event ;
    rdfs:label "Connector Configuration Change"@en ;
    rdfs:comment "Event notifying the recipient(s) about a connector's configuration change. The payload of the message must contain the updated connector's self-description."@en.

ids:BrokerQueryScope a owl:Class;
    rdfs:label "RejectionReason"@en ;
    rdfs:comment "Class of scopes that may limit the space of broker query results."@en.

ids:BrokerQuery a owl:Class;
    rdfs:subClassOf ids:Query;
    rdfs:label "Broker Query"@en ;
    rdfs:comment "Query command intended to be consumed by a Broker."@en.

ids:brokerQueryScope a owl:ObjectProperty;
    rdfs:label "brokerQueryScope"@en;
    rdfs:domain ids:BrokerQuery;
    rdfs:range ids:BrokerQueryScope;
    rdfs:comment "The scope of a query defined in a BrokerQuery message."@en.

ids:QueryLanguage a owl:Class;
    rdfs:label "QueryLanguage"@en ;
    rdfs:comment "Class of query languages in which query strings may be formalized."@en.

ids:queryLanguage a owl:ObjectProperty;
    rdfs:domain ids:Query;
    rdfs:range ids:BrokerQuery;
    rdfs:label "queryLanguage"@en;
    rdfs:comment "If queryPayloadType refers to a query string, this property specifies the language of the query."@en.


# Contract Negotiation
# --------------------
    
ids:ContractOfferMessage a owl:Class ;
    rdfs:subClassOf ids:Request ;
    rdfs:label "Contract Offer Message"@en;
    rdfs:comment "Message containing a contract with resource access modalities (as offered by the data provider to the data consumer) in the associated payload.".

ids:ContractRequestMessage a owl:Class ;
    rdfs:subClassOf ids:Request ;
    rdfs:label "Contract Request Message"@en;
    rdfs:comment "Message containing a contract with resource access modalities (as offered by the data consumer to the data provider) in the associated payload.".

ids:ContractAgreementMessage a owl:Class ;
    rdfs:subClassOf ids:Event;
    rdfs:label "Contract Agreement Message"@en;
    rdfs:comment "Message containing a contract with resource access modalities on which two parties have agreed."@en.

ids:ContractRejectionMessage a owl:Class ;
    rdfs:subClassOf ids:Rejection;
    rdfs:label "Contract Rejection Message"@en;
    rdfs:comment "Message indicating rejection of a contract."@en.

ids:contractRejectionReason a owl:DatatypeProperty;
	rdfs:label "Contract Rejection Reason"@en ;
	rdfs:domain ids:ContractRejected;
    rdfs:range rdf:PlainLiteral;
	rdfs:comment "Human-readable text describing the reason for contract rejection."@en.

# Resource Exchange
# -----------------

ids:InvokeOperation a owl:Class ;
    rdfs:subClassOf ids:Request ;
    rdfs:label "Invoke Operation"@en;
    rdfs:comment "Message requesting the recipient to invoke a specific operation."@en;
    idsm:validation [
        idsm:forProperty ids:operationReference;
        idsm:constraint idsm:NotNull;
    ].

ids:operationReference rdf:type owl:DatatypeProperty ;
    rdfs:domain ids:InvokeOperation ;
    rdfs:range xsd:anyURI ;
    rdfs:label "Operation Reference"@en ;
    rdfs:comment "References the operation to be invoked on the recipient's side."@en.

#todo: how to describe parameter instance values?

ids:RequestInProcess a owl:Class ;
    rdfs:subClassOf ids:Response;
    rdfs:label "Request In Process"@en;
    rdfs:comment "Notification that a request has been accepted and is being processed."@en.

ids:MessageProcessed a owl:Class ;
    rdfs:subClassOf ids:Response;
    rdfs:label "Message Processed"@en;
    rdfs:comment "Notification that a message has been successfully processed (i.e. not ignored or rejected)."@en.