@prefix ids: <https://w3id.org/ids/core/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix idsc_media: <https://w3id.org/ids/code/mediatype/> .
@prefix idsc_lang: <https://w3id.org/ids/code/language/> .
@prefix idsc_lic: <https://w3id.org/ids/code/license/> .


_:r
    # Resource
    a ids:Resource .
        
_:p
    # Provider
    a ids:Participant .

_:con
    # Consumer
    a ids:Participant .

_:cof
    # Example of a Contract Offer submitted by the provider
    a ids:ContractOffer ;
    ids:contractStart "2018-09-01T10:00:00+01:00"^^xsd:dateTime ;
    # validity not further constrained
    ids:contractDate "2018-08-31"^^xsd:date ;
    ids:provider _:p ;
    ids:consumer _:c ;
    ids:permission _:cperm ;
    ids:obligation _:cduty ;
    ids:contractDocument _:cdoc ;
    ids:contractAnnex _:can .

_:cperm
    a ids:Permission ;
    ids:target _:r ;
    ids:assigner _:p ;
    ids:assignee _:c ;
    # Permission to use _:r
    ids:action [
        a ids:use ;
        # at given conditions
        ids:refinement: [
            ids:leftOperand: ids:pricingModel ;
            ids:operator ids:eq ;
            ids:rightOperand _:pmod 
        ]
    ] ;
    # as long as ..
    ids:duty [
        ids:action ids:accept ;
        # The only way to parametrize the action
        ids:refinement: [
            ids:leftOperand: ids:licenceType ;
            ids:operator ids:eq ;
            ids:rightOperand idsc_lic:BSDLicense 
        ]
    ] .

_:pmod
    a ids:Pricingmodel .
  
_:cdoc 
    a ids:Resource ;
    ids:content [
        a ids:Text;
        ids:contentType ids:CONTRACT ;
        ids:language idsc_lang:English ;
        ids:representation [
            ids:mediaType idsc_media:text_plain ;
            ids:instance [
                a ids:InlineArtifact ;
                ids:literalValue "Short version of the contract signed by FOO and BAR."@en 
            ]
        ]
    ];
    ids:content [
        a ids:Text;
        ids:contentType ids:CONTRACT ;
        ids:language idsc_lang:German ;
        ids:representation [
            ids:mediaType idsc_media:text_plain ;
            ids:instance [
                a ids:RemoteArtifact ;
                ids:downloadUrl "https://mydocs.org/contracts/foo/bar/1" 
            ]
        ]
    ] .
    
_:can 
    a ids:Resource ;
    ids:content [
        a ids:Software;
        ids:contentType ids:CEP_RULE ;
        ids:representation [
            ids:representationType ids:ESPER_EPL ; # ?
            ids:mediaType idsc_media:text_plain ; # text_epl ~ Event Processing Language (EPL)
            ids:instance [
                a ids:InlineArtifact ;
                ids:literalValue "select avg(value) from value_stream#time_batch(60 sec)"@en 
            ]
        ]
    ].
